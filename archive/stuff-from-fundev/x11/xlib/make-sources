
#  Dylan libraries for interfacing with Xlib.
#
#  This file controls the generation of source files that are created
#  automatically by adapting information from the X11 C header files.

# Copyright (C) 1998 Functional Objects, Inc. All rights reserved.


XLIB=X.dylan Xlib.dylan Xatom.dylan keysymdef.dylan cursorfont.dylan \
	library.dylan

all: $(XLIB)

COMDIR=.

include $(COMDIR)/sources.mak


library.dylan: library.src X.dylan Xlib.dylan Xatom.dylan keysymdef.dylan \
	cursorfont.dylan

X.dylan: $(XHDIR)/X.h  $(PATTERN-DEP)
	x-to-dylan -module Xlib  $(XHDIR)/X.h $@

Xlib.dylan: $(XHDIR)/Xlib.h  $(PATTERN-DEP)
	x-to-dylan -module Xlib  $(XHDIR)/Xlib.h $@

Xatom.dylan: $(XHDIR)/Xatom.h $(PATTERN-DEP)
	x-to-dylan -module Xlib  $(XHDIR)/Xatom.h $@

keysymdef.dylan: $(XHDIR)/keysymdef.h $(PATTERN-DEP) make-sources
	x-to-dylan -module Xlib  $(XHDIR)/keysymdef.h \
		-p 'defn:XK_\J<I>\L\C 0x\J<X> \/\* deprecated \*\/=' \
		-p 'number:0xFFFFFF=-1@end' \
		-D XK_LATIN1 -U XK_LATIN2 -U XK_LATIN3 -U XK_LATIN4 \
		-U XK_KATAKANA -U XK_ARABIC -U XK_CYRILLIC \
		-U XK_APL -U XK_HEBREW -U XK_GREEK  $@

cursorfont.dylan: $(XHDIR)/cursorfont.h $(PATTERN-DEP)
	x-to-dylan -module Xlib  $(XHDIR)/cursorfont.h $@

# remove all generated files
clean:
	rm -f $(XLIB) *.bak *.exp

# remove internal temporary files
tidy:
	rm -f *.bak *.exp

DTAGS=/u/dylan/tools/gnuemacs/dtags
TAGS: $(XLIB) aux-xlib.dylan
	$(DTAGS) aux-xlib.dylan $(XLIB)

tags: TAGS
